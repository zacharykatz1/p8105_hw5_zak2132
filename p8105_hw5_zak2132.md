P8105 Homework \#5
================
Zachary Katz (UNI: zak2132)
11/20/2021

## Problem 1

``` r
# Import CSV and clean names
homicide_df = read_csv(file = "./Data/homicide-data.csv") %>% 
  janitor::clean_names()
```

    ## Rows: 52179 Columns: 12

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (9): uid, victim_last, victim_first, victim_race, victim_age, victim_sex...
    ## dbl (3): reported_date, lat, lon

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
# Obtain head of raw data
head(homicide_df)
```

    ## # A tibble: 6 × 12
    ##   uid        reported_date victim_last victim_first victim_race victim_age victim_sex
    ##   <chr>              <dbl> <chr>       <chr>        <chr>       <chr>      <chr>     
    ## 1 Alb-000001      20100504 GARCIA      JUAN         Hispanic    78         Male      
    ## 2 Alb-000002      20100216 MONTOYA     CAMERON      Hispanic    17         Male      
    ## 3 Alb-000003      20100601 SATTERFIELD VIVIANA      White       15         Female    
    ## 4 Alb-000004      20100101 MENDIOLA    CARLOS       Hispanic    32         Male      
    ## 5 Alb-000005      20100102 MULA        VIVIAN       White       72         Female    
    ## 6 Alb-000006      20100126 BOOK        GERALDINE    White       91         Female    
    ## # … with 5 more variables: city <chr>, state <chr>, lat <dbl>, lon <dbl>,
    ## #   disposition <chr>

``` r
# Obtain structure of raw data
str(homicide_df)
```

    ## spec_tbl_df [52,179 × 12] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
    ##  $ uid          : chr [1:52179] "Alb-000001" "Alb-000002" "Alb-000003" "Alb-000004" ...
    ##  $ reported_date: num [1:52179] 20100504 20100216 20100601 20100101 20100102 ...
    ##  $ victim_last  : chr [1:52179] "GARCIA" "MONTOYA" "SATTERFIELD" "MENDIOLA" ...
    ##  $ victim_first : chr [1:52179] "JUAN" "CAMERON" "VIVIANA" "CARLOS" ...
    ##  $ victim_race  : chr [1:52179] "Hispanic" "Hispanic" "White" "Hispanic" ...
    ##  $ victim_age   : chr [1:52179] "78" "17" "15" "32" ...
    ##  $ victim_sex   : chr [1:52179] "Male" "Male" "Female" "Male" ...
    ##  $ city         : chr [1:52179] "Albuquerque" "Albuquerque" "Albuquerque" "Albuquerque" ...
    ##  $ state        : chr [1:52179] "NM" "NM" "NM" "NM" ...
    ##  $ lat          : num [1:52179] 35.1 35.1 35.1 35.1 35.1 ...
    ##  $ lon          : num [1:52179] -107 -107 -107 -107 -107 ...
    ##  $ disposition  : chr [1:52179] "Closed without arrest" "Closed by arrest" "Closed without arrest" "Closed by arrest" ...
    ##  - attr(*, "spec")=
    ##   .. cols(
    ##   ..   uid = col_character(),
    ##   ..   reported_date = col_double(),
    ##   ..   victim_last = col_character(),
    ##   ..   victim_first = col_character(),
    ##   ..   victim_race = col_character(),
    ##   ..   victim_age = col_character(),
    ##   ..   victim_sex = col_character(),
    ##   ..   city = col_character(),
    ##   ..   state = col_character(),
    ##   ..   lat = col_double(),
    ##   ..   lon = col_double(),
    ##   ..   disposition = col_character()
    ##   .. )
    ##  - attr(*, "problems")=<externalptr>

`homicide_df` is a collection of 52179 observations on 12 variables from
The Washington Post. Each observation represents a criminal homicide
(i.e. unique victim). Key variables for each homicide include
`reported_date` (reported date of homicide), demographic variables for
each victim including first and last name (`victim_first` and
`victim_last`, respectively), `victim_race`, `victim_age`, and
`victim_sex`, as well as location of homicide in both geographical name
(`city` and `state`) and coordinates (`lat` and `long`). `disposition`
informs us whether a case remains open or closed, including if an arrest
was or wasn’t made. Data comes from 28 states and covers the period from
2.0070101^{7} to 2.015111^{8}.

We can also summarize the raw data as follows, finding that 60 homicide
observations are missing latitude and longitude coordinates and the
28-state data represents 50 unique cities.

``` r
summary(homicide_df)
```

    ##      uid            reported_date       victim_last        victim_first      
    ##  Length:52179       Min.   : 20070101   Length:52179       Length:52179      
    ##  Class :character   1st Qu.: 20100318   Class :character   Class :character  
    ##  Mode  :character   Median : 20121216   Mode  :character   Mode  :character  
    ##                     Mean   : 20130899                                        
    ##                     3rd Qu.: 20150911                                        
    ##                     Max.   :201511105                                        
    ##                                                                              
    ##  victim_race         victim_age         victim_sex            city          
    ##  Length:52179       Length:52179       Length:52179       Length:52179      
    ##  Class :character   Class :character   Class :character   Class :character  
    ##  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
    ##                                                                             
    ##                                                                             
    ##                                                                             
    ##                                                                             
    ##     state                lat             lon          disposition       
    ##  Length:52179       Min.   :25.73   Min.   :-122.51   Length:52179      
    ##  Class :character   1st Qu.:33.77   1st Qu.: -96.00   Class :character  
    ##  Mode  :character   Median :38.52   Median : -87.71   Mode  :character  
    ##                     Mean   :37.03   Mean   : -91.47                     
    ##                     3rd Qu.:40.03   3rd Qu.: -81.76                     
    ##                     Max.   :45.05   Max.   : -71.01                     
    ##                     NA's   :60      NA's   :60

``` r
skimr::skim(homicide_df)
```

|                                                  |              |
|:-------------------------------------------------|:-------------|
| Name                                             | homicide\_df |
| Number of rows                                   | 52179        |
| Number of columns                                | 12           |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_   |              |
| Column type frequency:                           |              |
| character                                        | 9            |
| numeric                                          | 3            |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ |              |
| Group variables                                  | None         |

Data summary

**Variable type: character**

| skim\_variable | n\_missing | complete\_rate | min | max | empty | n\_unique | whitespace |
|:---------------|-----------:|---------------:|----:|----:|------:|----------:|-----------:|
| uid            |          0 |              1 |   9 |  10 |     0 |     52179 |          0 |
| victim\_last   |          0 |              1 |   1 |  20 |     0 |     12687 |          0 |
| victim\_first  |          0 |              1 |   1 |  28 |     0 |     16640 |          0 |
| victim\_race   |          0 |              1 |   5 |   8 |     0 |         6 |          0 |
| victim\_age    |          0 |              1 |   1 |   7 |     0 |       102 |          0 |
| victim\_sex    |          0 |              1 |   4 |   7 |     0 |         3 |          0 |
| city           |          0 |              1 |   5 |  14 |     0 |        50 |          0 |
| state          |          0 |              1 |   2 |   2 |     0 |        28 |          0 |
| disposition    |          0 |              1 |  14 |  21 |     0 |         3 |          0 |

**Variable type: numeric**

| skim\_variable | n\_missing | complete\_rate |        mean |         sd |          p0 |         p25 |         p50 |         p75 |          p100 | hist  |
|:---------------|-----------:|---------------:|------------:|-----------:|------------:|------------:|------------:|------------:|--------------:|:------|
| reported\_date |          0 |              1 | 20130899.16 | 1123419.63 | 20070101.00 | 20100318.00 | 20121216.00 | 20150911.00 | 201511105\.00 | ▇▁▁▁▁ |
| lat            |         60 |              1 |       37.03 |       4.35 |       25.73 |       33.77 |       38.52 |       40.03 |         45.05 | ▁▅▅▇▅ |
| lon            |         60 |              1 |      -91.47 |      13.75 |     -122.51 |      -96.00 |      -87.71 |      -81.76 |        -71.01 | ▃▁▃▇▅ |

Let’s clean the data a bit, including using appropriate variable types.

``` r
# Clean the data
homicide_df = homicide_df %>% 
  # Change data types where warranted
  # Not changing date using `lubridate` package because no HW analysis requires date var
  mutate(
    victim_age = as.numeric(victim_age),
    victim_sex = as.factor(victim_sex),
    state = as.factor(state)
  ) %>% 
  # Create `city_state` variable and remove unnecessary variables
  mutate(
    city_state = 
      str_c(city, ", ", state)
  ) %>% 
  select(-city, -state) 
```

    ## Warning in mask$eval_all_mutate(quo): NAs introduced by coercion

We want to summarize within cities to obtain the total number of
homicides, and the number of unsolved homicides (with disposition
“Closed without arrest” or “Open/No arrest”). We can do this as follows:

``` r
# Total number of homicides by city
total_homicides = homicide_df %>% 
  group_by(city_state) %>% 
  summarize(
    num_homicides = n()
  )

# Total number of unsolved homicides by city
homicide_df %>% 
  filter(disposition == "Closed without arrest" | disposition == "Open/No arrest") %>% 
  group_by(city_state) %>% 
  summarize(
    num_unsolved_homicides = n()
  ) %>% 
  # Join data frame
  full_join(total_homicides, by = "city_state") %>% 
  # Add percent unsolved column
  mutate(
    perc_unsolved = round(num_unsolved_homicides*100/num_homicides, 1)
  ) %>% 
  # Sort by percent unsolved (ascending)
  arrange(perc_unsolved) %>% 
  knitr::kable(
    col.names = c("City/State", "# of Unsolved Homicides", "Total Homicides", "% Unsolved")
  )
```

| City/State         | \# of Unsolved Homicides | Total Homicides | % Unsolved |
|:-------------------|-------------------------:|----------------:|-----------:|
| Richmond, VA       |                      113 |             429 |       26.3 |
| Charlotte, NC      |                      206 |             687 |       30.0 |
| Memphis, TN        |                      483 |            1514 |       31.9 |
| Tulsa, OK          |                      193 |             583 |       33.1 |
| Fresno, CA         |                      169 |             487 |       34.7 |
| Milwaukee, wI      |                      403 |            1115 |       36.1 |
| Nashville, TN      |                      278 |             767 |       36.2 |
| Durham, NC         |                      101 |             276 |       36.6 |
| Sacramento, CA     |                      139 |             376 |       37.0 |
| San Diego, CA      |                      175 |             461 |       38.0 |
| Atlanta, GA        |                      373 |             973 |       38.3 |
| Albuquerque, NM    |                      146 |             378 |       38.6 |
| New York, NY       |                      243 |             627 |       38.8 |
| Kansas City, MO    |                      486 |            1190 |       40.8 |
| Long Beach, CA     |                      156 |             378 |       41.3 |
| Omaha, NE          |                      169 |             409 |       41.3 |
| Las Vegas, NV      |                      572 |            1381 |       41.4 |
| San Antonio, TX    |                      357 |             833 |       42.9 |
| Birmingham, AL     |                      347 |             800 |       43.4 |
| Washington, DC     |                      589 |            1345 |       43.8 |
| Cincinnati, OH     |                      309 |             694 |       44.5 |
| Philadelphia, PA   |                     1360 |            3037 |       44.8 |
| Indianapolis, IN   |                      594 |            1322 |       44.9 |
| Louisville, KY     |                      261 |             576 |       45.3 |
| Tampa, FL          |                       95 |             208 |       45.7 |
| Baton Rouge, LA    |                      196 |             424 |       46.2 |
| Fort Worth, TX     |                      255 |             549 |       46.4 |
| Savannah, GA       |                      115 |             246 |       46.7 |
| Dallas, TX         |                      754 |            1567 |       48.1 |
| Oklahoma City, OK  |                      326 |             672 |       48.5 |
| Los Angeles, CA    |                     1106 |            2257 |       49.0 |
| Boston, MA         |                      310 |             614 |       50.5 |
| Houston, TX        |                     1493 |            2942 |       50.7 |
| San Francisco, CA  |                      336 |             663 |       50.7 |
| Jacksonville, FL   |                      597 |            1168 |       51.1 |
| Minneapolis, MN    |                      187 |             366 |       51.1 |
| Columbus, OH       |                      575 |            1084 |       53.0 |
| Pittsburgh, PA     |                      337 |             631 |       53.4 |
| Oakland, CA        |                      508 |             947 |       53.6 |
| St. Louis, MO      |                      905 |            1677 |       54.0 |
| Denver, CO         |                      169 |             312 |       54.2 |
| Phoenix, AZ        |                      504 |             914 |       55.1 |
| Detroit, MI        |                     1482 |            2519 |       58.8 |
| Stockton, CA       |                      266 |             444 |       59.9 |
| Miami, FL          |                      450 |             744 |       60.5 |
| Buffalo, NY        |                      319 |             521 |       61.2 |
| San Bernardino, CA |                      170 |             275 |       61.8 |
| Baltimore, MD      |                     1825 |            2827 |       64.6 |
| New Orleans, LA    |                      930 |            1434 |       64.9 |
| Chicago, IL        |                     4073 |            5535 |       73.6 |
| Tulsa, AL          |                       NA |               1 |         NA |

Richmond, VA has the highest % of homicides solved, whereas Chicago has
the lowest.
